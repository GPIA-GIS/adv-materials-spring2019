<!DOCTYPE html>
<html>
    <head>
        <title>Class 9 | Advanced GIS</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

        <link href='https://fonts.googleapis.com/css?family=Arvo|Alegreya+Sans' rel='stylesheet' type='text/css'>

        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
        <link href="../css/pig.css" rel="stylesheet" type="text/css" />
        <link href="../css/base.css" rel="stylesheet" />

        <script src="../js/pig.js"></script>
    </head>
    <body>

        <div class="slide">
            <p>Welcome to Advanced GIS, Lecture 9</p>
            <p>This is a web page that can be viewed as slides.</p>
            <p>→ to move forward</p>
            <p>← to go back</p>
        </div>

        <div class="slide">
            <h1>Advanced GIS</h1>
            <p>Class 9</p>
        </div>

        <div class="slide">
            <h2>next week: milestones</h2>
        </div>

        <div class="slide intermission"></div>

        <div class="slide">
            <h2>getting data from Carto</h2>
        </div>

        <div class="slide">
            <h2>with JavaScript you can ask Carto for any data from your datasets</h2>
        </div>

        <div class="slide">
            <h2>this can be handy for showing summaries on a page</h2>
        </div>

        <div class="slide" style="background-image: url(img/carto-count.png);">
            <a href="https://glitch.com/edit/#!/marsh-sled" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/carto-count.png);">
            <h2>let's take a look at the code behind this</h2>
            <a href="https://glitch.com/edit/#!/marsh-sled" class="source">source</a>
        </div>

        <div class="slide">
            <h2><a href="inclass.html" target="_blank">in-class exercise, part 1</a></h2>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql-count.png);">
            <a href="https://glitch.com/edit/#!/carto-location-click2" class="source">source</a>
        </div>

        <div class="slide">
            <h2>you do this by giving Carto the SQL, and it returns an object of data</h2>
        </div>

        <div class="slide" style="background-image: url(img/carto-count-fetch.png);">
        </div>

        <div class="slide" style="background-image: url(img/carto-count-fetch.png);">
          <pre><code>https://brelsfoeagain.carto.com/api/v2/sql/?q=
  SELECT COUNT(*)
  FROM nypd_motor_vehicle_collisions</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-count-url.png);">
            <a href="https://brelsfoeagain.carto.com/api/v2/sql/?q= SELECT COUNT(*) FROM nypd_motor_vehicle_collisions" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/carto-count-url.png);">
            <h2>this is just a URL you can open in a browser</h2>
            <a href="https://brelsfoeagain.carto.com/api/v2/sql/?q= SELECT COUNT(*) FROM nypd_motor_vehicle_collisions" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/carto-count-network-0.png);">
        </div>

        <div class="slide" style="background-image: url(img/carto-count-network-1.png);">
        </div>

        <div class="slide" style="background-image: url(img/carto-count-network-2.png);">
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
        </div>

        <div class="slide">
            <h2>remember arrays and objects?</h2>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>var lifeStages = [
    'Neonate',
    'Juvenile',
    'Adult'
];</code></pre>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>var lifeStages = [
    'Neonate',
    'Juvenile',
    'Adult'
];</code></pre>
            <code>lifeStages[0]</code> is 'Neonate'
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>var coordinates = {
    latitude: 41.56,
    longitude: -73.29
};</code></pre>
            <code>coordinates.latitude</code> is 41.56
        </div>

        <div class="slide">
            <pre class="prettyprint" style="font-size: 25px; line-height: 35px;"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
            <code>data.rows</code> is <pre class="prettyprint"><code>[
    {"count":208}
]</code></pre>
        </div>

        <div class="slide">
            <pre class="prettyprint" style="font-size: 25px; line-height: 35px;"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
            <code>data.rows[0]</code> is <code>{"count":208}</code>
        </div>

        <div class="slide">
            <pre class="prettyprint" style="font-size: 25px; line-height: 35px;"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
            <code>data.rows[0].count</code> is <code>208</code>
        </div>

        <div class="slide" style="background-image: url(img/carto-sql-api.png);">
            <a href="https://carto.com/docs/carto-engine/sql-api/making-calls/" class="source">source</a>
        </div>

        <div class="slide intermission"></div>

        <div class="slide" style="background-image: url(img/sidebar-innerhtml.png);">
          <a href="https://glitch.com/edit/#!/marsh-sled?path=script.js:65:13" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/popup-create-content.png);">
            <a href="https://glitch.com/edit/#!/carto-popups" target="_blank" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/popup-create-content.png);">
            <h2>this can quickly get difficult to manage</h2>
            <a href="https://glitch.com/edit/#!/carto-popups" target="_blank" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/carto-popup.png);">
        </div>

        <div class="slide" style="background-image: url(img/carto-popup.png);">
            <h2>you might prefer doing it the way we did in Carto</h2>
        </div>

        <div class="slide">
            <h2>templates</h2>
        </div>

        <div class="slide">
            <h2>templates create HTML for you</h2>
        </div>

        <div class="slide">
            <h2>templates use variables from your code</h2>
        </div>

        <div class="slide">
            <h2>template + data = html</h2>
        </div>

        <div class="slide" style="background-image: url(img/mustache.png);">
        </div>

        <div class="slide" style="background-image: url(img/mustache.png);">
            <h2><a href="http://mustache.github.io/" target="_blank">Mustache</a></h2>
        </div>

        <div class="slide" style="background-image: url(img/mustache.png);">
            <h2><a href="http://mustache.github.io/" target="_blank">Mustache</a> is one library for making templates</h2>
        </div>

        <div class="slide" style="background-image: url(img/mustache.png);">
            <h2><a href="http://mustache.github.io/" target="_blank">Mustache</a> is the same library Carto uses to make popups</h2>
        </div>

        <div class="slide" style="background-image: url(img/mustache-docs.png);">
            <a href="http://mustache.github.io/mustache.5.html" target="_blank" class="source">Mustache docs</a>
        </div>

        <div class="slide">
            <h2>you can make your own popup HTML</h2>
        </div>

        <div class="slide">
            <pre class="prettyprint" style="font-size: 45px;"><code>&lt;div&gt;
    &lt;div&gt;{{on_street_name}} and {{cross_street_name}}&lt;/div&gt;
    &lt;div&gt;On {{date}} at {{time}}&lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>

        <div class="slide">
            <pre class="prettyprint" style="font-size: 45px;"><code>&lt;div&gt;
    &lt;div&gt;{{on_street_name}} and {{cross_street_name}}&lt;/div&gt;
    &lt;div&gt;On {{date}} at {{time}}&lt;/div&gt;
&lt;/div&gt;</code></pre>
            <h2>anything in {{}} gets replaced by Mustache</h2>
        </div>

        <div class="slide">
            <p>template:</p>
            <pre class="prettyprint" style="font-size: 35px;"><code>&lt;div&gt;
    &lt;div&gt;{{on_street_name}} and {{cross_street_name}}&lt;/div&gt;
    &lt;div&gt;On {{date}} at {{time}}&lt;/div&gt;
&lt;/div&gt;</code></pre>

            <p>data:</p>
            <pre class="prettyprint" style="font-size: 35px;"><code>var context = {
    on_street_name: "BEDFORD AVENUE",
    cross_street_name: "AVENUE N",
    date: "01/23/2019",
    time: "18:42:00"
};</code></pre>
        </div>

        <div class="slide">
            <h2>results in</h2>
            <pre class="prettyprint" style="font-size: 45px;"><code>&lt;div&gt;
    &lt;div&gt;BEDFORD AVENUE and AVENUE N&lt;/div&gt;
    &lt;div&gt;On 01/23/2019 at 18:42:00&lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>

        <div class="slide">
            <h2>we'll call the data you pass to the template its <em>context</em></h2>
        </div>

        <div class="slide">
            <h2>passing the <em>context</em> to Mustache tells it how to fill your template</h2>
        </div>

        <div class="slide" style="background-image: url(img/carto-popup-mustache-example.png);">
            <h2>take a look at this code</h2>
            <a href="https://glitch.com/edit/#!/carto-popups-mustache" target="_blank" class="source">source</a>
        </div>

        <div class="slide">
            <h2><a href="inclass.html">in-class exercise part 2</a></h2>
        </div>

        <div class="slide" style="background-image: url(img/mustache-list-results.png);">
            <a href="https://glitch.com/edit/#!/jasper-broccoli" target="_blank" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/mustache-list-results.png);">
            <h2>Mustache can also help with making HTML for a list of things</h2>
            <a href="https://glitch.com/edit/#!/jasper-broccoli" target="_blank" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/mustache-loop.png);">
            <a href="https://glitch.com/edit/#!/jasper-broccoli" target="_blank" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/mustache-loop.png);">
            <h2>here <code>rows</code> is an array</h2>
            <a href="https://glitch.com/edit/#!/jasper-broccoli" target="_blank" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/mustache-loop.png);">
            <h2>an <code>li</code> is made for each element in that array</h2>
            <a href="https://glitch.com/edit/#!/jasper-broccoli" target="_blank" class="source">source</a>
        </div>

        <div class="slide intermission"></div>

        <div class="slide">
            <h2>responsive CSS</h2>
        </div>

        <div class="slide">
            <h2>with CSS you can target screens of particular sizes</h2>
        </div>

        <div class="slide">
            <h2>usually phones, sometimes tablets</h2>
        </div>

        <div class="slide" style="background-image: url(img/github-responsive.gif);">
        </div>

        <div class="slide" style="background-image: url(img/media-queries.png);">
          <a href="https://glitch.com/edit/#!/fifth-traffic" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/media-queries.png);">
            <h2><code>media</code> queries</h2>
          <a href="https://glitch.com/edit/#!/fifth-traffic" class="source">source</a>
        </div>

        <div class="slide">
            <h2>on phones and tablets, you'll often:</h2>
            <ul style="list-style: disc;">
                <li>hide some elements</li>
                <li>reduce padding and margin</li>
                <li>increase font and button sizes</li>
            </ul>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>@media (max-width: 400px) {
  body {
    font-size: 34px;
  }
}</code></pre>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>@media (max-width: 400px) {
  body {
    font-size: 34px;
  }
}</code></pre>
            <h2>if the screen is at most 400px wide, run the CSS inside</h2>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>@media (max-width: 400px) {
  body {
    font-size: 34px;
  }
}</code></pre>
            <h2>you still select elements and style them as normal</h2>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>@media (max-width: 400px) {
  .info {
    display: none;
  }
}</code></pre>
        </div>

        <div class="slide">
            <pre class="prettyprint"><code>@media (max-width: 400px) {
  .info {
    display: none;
  }
}</code></pre>
            <h2>setting <code>display</code> to <code>none</code> hides an element</h2>
        </div>

        <div class="slide" style="background-image: url(img/hide-on-phone.png);">
            <a class="source" href="https://glitch.com/edit/#!/glitter-bakery">source</a>
        </div>

        <div class="slide" style="background-image: url(img/mdn-media-queries.png);">
            <a class="source" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries">source</a>
        </div>

        <div class="slide">
            <h2><a href="inclass.html" target="_blank">in-class exercise, part 3</a></h2>
        </div>

    </body>
</html>
