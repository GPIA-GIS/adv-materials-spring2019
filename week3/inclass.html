<html>
    <head>
        <title>In-class Exercises | Advanced GIS</title>
        <link href='https://fonts.googleapis.com/css?family=Arvo|Alegreya Sans' rel='stylesheet' type='text/css'>
        <link href="../css/pages.css" rel="stylesheet" type="text/css" />
        <link href="../css/inclass.css" rel="stylesheet" />
    </head>
    <body>
        <main>
            <header>
                <a href="..">&larr; Advanced GIS</a>
                <h1>In-class Exercises</h1>
            </header>

            <section>
                <h2>Part 1: Analysis</h2>
                <ol>
                    <li>Download <a href="data/week3data.zip">today's data</a>. It contains a CSV of vehicle collisions recorded by the NYPD in January 2019. You can get the data on <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Motor-Vehicle-Collisions/h9gi-nx95/data">NYC Open Data</a>.</li>
                    <li>Unzip <strong>week3data.zip</strong> and add the CSV to your CARTO account.</li>
                    <li>Create a map with the collisions.</li>
                    <li>Filter the data using the <strong>Filter by column value</strong> analysis. For example, show only collisions where <strong>on_street_name</strong> is <strong>Broadway</strong>.</li>
                    <li>Add a buffer to the layer using the <strong>Create Travel/Distance Buffers</strong> analysis. For this exercise, let's create buffers of 150 meters.</li>
                </ol>
            </section>

            <section>
                <h2>Part 2: Selecting data with SQL</h2>
                <ol>
                    <li>Open the <a href="materials/sql-cheatsheet.pdf" target="_blank">SQL cheatsheet</a>.</li>
                    <li>Open the collisions dataset&mdash;not as a map.</li>
                    <li>Execute a few SQL queries using the patterns outlined in the cheatsheet to answer these questions:
                        <ul>
                            <li>How many collisions are there?</li>
                            <li>Which collisions happened in Staten Island?</li>
                            <li>How many collisions involved a taxi?</li>
                            <li>How many people were injured in a collision?</li>
                        </ul>
                        It's good practice to keep track of the queries you run in a text file.
                    </li>
                    <li>Which of the above work in the map <strong>preview</strong>, too?</li>
                    <li>Try forming a question of your own and answering it with SQL.</li>
                </ol>
            </section>

            <section>
                <h2>Part 3: Updating data with SQL</h2>
                <ol>
                    <li>Open the collisions dataset.</li>
                    <li>Add a new column, name it <code>involved_taxi</code>, and make it a string field.</li>
                    <li>Put <code>yes</code> in our new column if any of the vehicle columns contains <code>TAXI</code>:
                        <pre>
UPDATE collisions
SET involved_taxi = 'yes'
WHERE vehicle_type_code_1 = 'TAXI' OR vehicle_type_code_2 = 'TAXI' OR vehicle_type_code_3 = 'TAXI' 
  OR vehicle_type_code_4 = 'TAXI' OR vehicle_type_code_5 = 'TAXI'</pre>
                    </li>
                    <li>Do the inverse of the previous step&mdash;set the new column to <code>no</code> if none of the vehicle columns contains <code>TAXI</code>.</li>
                    <li>Create a map with the dataset and include the new column in the popups.</li>
                </ol>
            </section>

            <footer>
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Advanced GIS</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://ebrelsford.github.io/" property="cc:attributionName" rel="cc:attributionURL">Eric Brelsford</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
            </footer>
        </main>
    </body>
</html>
